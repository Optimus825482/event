import psycopg2
from datetime import datetime

# Coolify'dan alınan 39 grup verisi
groups = [
    ("a1000001-0001-0001-0001-000000000001", "Grup 1 - Mahperi Kurt", "#ef4444", ["1","2","3","11","12"], 1),
    ("a1000001-0001-0001-0001-000000000002", "Grup 2 - Tuğçe & Salih", "#f97316", ["101","116","117"], 2),
    ("a1000001-0001-0001-0001-000000000003", "Grup 3 - Ramazan N.", "#f59e0b", ["102","103","118","119"], 3),
    ("a1000001-0001-0001-0001-000000000004", "Grup 4 - Özgür & Cihan", "#eab308", ["104","105","120","121"], 4),
    ("a1000001-0001-0001-0001-000000000005", "Grup 5 - Yaşar & Ali", "#84cc16", ["106","107","122","123"], 5),
    ("a1000001-0001-0001-0001-000000000006", "Grup 6 - Furkan & Halit", "#22c55e", ["108","109","124","125"], 6),
    ("a1000001-0001-0001-0001-000000000007", "Grup 7 - Erencan & Bilal", "#10b981", ["110","111","126","127"], 7),
    ("a1000001-0001-0001-0001-000000000008", "Grup 8 - Orhan Atlı", "#14b8a6", ["112","113","128","129"], 8),
    ("a1000001-0001-0001-0001-000000000009", "Grup 9 - Eren & Ramazan D.", "#06b6d4", ["114","115","130","131"], 9),
    ("a1000001-0001-0001-0001-000000000010", "Grup 10 - Nur & Sefa", "#0ea5e9", ["132","133","147","148","33"], 10),
    ("a1000001-0001-0001-0001-000000000011", "Grup 11 - Mustafa & Sergen", "#3b82f6", ["134","135","149","150"], 11),
    ("a1000001-0001-0001-0001-000000000012", "Grup 12 - Uğur Can & Salman", "#6366f1", ["136","137","151","152"], 12),
    ("a1000001-0001-0001-0001-000000000013", "Grup 13 - Emirhan & Muhammed A.", "#8b5cf6", ["138","139","140","141"], 13),
    ("a1000001-0001-0001-0001-000000000014", "Grup 14 - Bünyamin & Muhammed W.", "#a855f7", ["142","143","153","154"], 14),
    ("a1000001-0001-0001-0001-000000000015", "Grup 15 - Sibel & Onurcan & Hüseyin", "#d946ef", ["144","145","146","155","156","157"], 15),
    ("a1000001-0001-0001-0001-000000000016", "Grup 16 - Feryal Yaman", "#ec4899", ["159","45","46","160","59","60"], 16),
    ("a1000001-0001-0001-0001-000000000017", "Grup 17 - Zeynep Okur", "#f43f5e", ["21","22","23","158","31","32"], 17),
    ("a1000001-0001-0001-0001-000000000018", "Grup 18 - Oğuzhan Elmas", "#fb7185", ["24","25","34","35"], 18),
    ("a1000001-0001-0001-0001-000000000019", "Grup 19 - İnanç Koçak", "#f472b6", ["26","27","40","41"], 19),
    ("a1000001-0001-0001-0001-000000000020", "Grup 20 - Tuğba İlbay", "#e879f9", ["28","29","42","43"], 20),
    ("a1000001-0001-0001-0001-000000000021", "Grup 21 - Sıla Kuvat", "#c084fc", ["30","162","44","163"], 21),
    ("a1000001-0001-0001-0001-000000000022", "Grup 22 - Aziz & Caner", "#a78bfa", ["36","37","50","51"], 22),
    ("a1000001-0001-0001-0001-000000000023", "Grup 23 - Yusuf & Mehmet K.", "#818cf8", ["38","39","52","53"], 23),
    ("a1000001-0001-0001-0001-000000000024", "Grup 24 - Feray & Ezgi", "#6366f1", ["4","5","13","14","15"], 24),
    ("a1000001-0001-0001-0001-000000000025", "Grup 25 - M.Ali Karasu", "#4f46e5", ["47","48","61","62"], 25),
    ("a1000001-0001-0001-0001-000000000026", "Grup 26 - Hakan Cintosun", "#4338ca", ["49","63","64"], 26),
    ("a1000001-0001-0001-0001-000000000027", "Grup 27 - Kaan Tonyalıoğlu", "#3730a3", ["54","65","66"], 27),
    ("a1000001-0001-0001-0001-000000000028", "Grup 28 - Kazım Koca", "#312e81", ["55","56","67","68"], 28),
    ("a1000001-0001-0001-0001-000000000029", "Grup 29 - Onur Nama", "#1e1b4b", ["57","58","69","70","164"], 29),
    ("a1000001-0001-0001-0001-000000000030", "Grup 30 - Şevval Erol", "#0f172a", ["6","7","8","16","17","18"], 30),
    ("a1000001-0001-0001-0001-000000000031", "Grup 31 - M. Akif Şimşek", "#0c4a6e", ["63","64","65","66"], 31),
    ("a1000001-0001-0001-0001-000000000032", "Grup 32 - Kerem Ertürk", "#075985", ["71","72","86","87"], 32),
    ("a1000001-0001-0001-0001-000000000033", "Grup 33 - Aytekin Sarıtoprak", "#0369a1", ["73","74","88","89"], 33),
    ("a1000001-0001-0001-0001-000000000034", "Grup 34 - Barış Tüzün", "#0284c7", ["75","76","90","91"], 34),
    ("a1000001-0001-0001-0001-000000000035", "Grup 35 - Ahmet Can & Ömer & M.Ali D.", "#0ea5e9", ["77","78","92","93"], 35),
    ("a1000001-0001-0001-0001-000000000036", "Grup 36 - Ali Dönmez", "#38bdf8", ["79","80","94","95"], 36),
    ("a1000001-0001-0001-0001-000000000037", "Grup 37 - Cafer Melih Yel", "#7dd3fc", ["81","82","96","97"], 37),
    ("a1000001-0001-0001-0001-000000000038", "Grup 38 - Mehmet Yıldırım", "#bae6fd", ["83","84","85","98","99","100"], 38),
    ("a1000001-0001-0001-0001-000000000039", "Grup 39 - Yıldız Ağırman", "#e0f2fe", ["9","10","19","20","161"], 39),
]

EVENT_ID = "4d9fb75e-dbcb-4b26-9823-28ecac3e421b"

# Local DB bağlantısı
conn = psycopg2.connect(
    host='localhost',
    port=5432,
    database='eventflow',
    user='postgres',
    password='518518Erkan'
)
cur = conn.cursor()

# Önce mevcut grupları sil
cur.execute('DELETE FROM table_groups WHERE "eventId" = %s', (EVENT_ID,))
print(f"Silinen grup sayısı: {cur.rowcount}")

# Yeni grupları ekle
now = datetime.now()
for group_id, name, color, table_ids, sort_order in groups:
    cur.execute("""
        INSERT INTO table_groups (id, "eventId", name, color, "tableIds", "groupType", "sortOrder", "createdAt", "updatedAt")
        VALUES (%s, %s, %s, %s, %s, 'standard', %s, %s, %s)
    """, (group_id, EVENT_ID, name, color, table_ids, sort_order, now, now))

conn.commit()
print(f"✅ {len(groups)} grup local DB'ye eklendi")

# Kontrol
cur.execute('SELECT COUNT(*) FROM table_groups WHERE "eventId" = %s', (EVENT_ID,))
count = cur.fetchone()[0]
print(f"Local DB'deki toplam grup: {count}")

cur.close()
conn.close()
